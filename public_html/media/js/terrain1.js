(function e(b,g,d){function c(m,j){if(!g[m]){if(!b[m]){var i=typeof require=="function"&&require;if(!j&&i){return i(m,!0)}if(a){return a(m,!0)}var k=new Error("Cannot find module '"+m+"'");throw k.code="MODULE_NOT_FOUND",k}var h=g[m]={exports:{}};b[m][0].call(h.exports,function(l){var o=b[m][1][l];return c(o?o:l)},h,h.exports,e,b,g,d)}return g[m].exports}var a=typeof require=="function"&&require;for(var f=0;f<d.length;f++){c(d[f])}return c})({1:[function(i,h,I){var a=I.width=610;var d=I.height=400;var o=I.wireframe=true;var s=I.wireframeWidth=1.2;var z=I.terrainHeight=50;var v=I.terrainSize=100;void 0;void 0;void 0;void 0;void 0;void 0;var N=I.l=function N(l){return console.log(l)};var f=I.midpoint=function f(R,l){return(R+l)/2};var n=I.average2=function n(R,l){return(R+l)/2};var m=I.average4=function m(R,l,T,S){return(R+l+T+S)/4};var c=I.safeAverage=function c(R,l,T,S){return function(){var U=0;var V=0;R?(function(){U=U+R;return V=V+1})():void 0;l?(function(){U=U+l;return V=V+1})():void 0;T?(function(){U=U+T;return V=V+1})():void 0;S?(function(){U=U+S;return V=V+1})():void 0;return U/V}.call(this)};var A=I.rand=function A(){return Math.random()};var q=I.randAroundZero=function q(l){return l*A()*2-l};var Q=I.jitter=function Q(R,l){return R+q(l)};void 0;var O=I.heightmapGetSafe=function O(S,l,R){return 0<=l&&l<=S.last&&(0<=R&&R<=S.last)?(function(){return S[R*S.resolution+l]})():void 0};void 0;var M=I.normalize=function M(l){return function(){var S=0-Infinity;var R=Infinity;(function(){var U=l.length;return function T(){var W=T;var V=0;do{W=V<U?(function(){(function(){var X=l[V];S<X?(function(){return S=X})():void 0;return R>X?(function(){return R=X})():void 0}.call(this));return T[0]=1+V,T})():void 0}while(V=T[0],W===T);return W}.call(this)}.call(this));return function(){var T=S-R;return function(){var V=l.length;return function U(){var X=U;var W=0;do{X=W<V?(function(){l[W]=(l[W]-R)/T;return U[0]=1+W,U})():void 0}while(W=U[0],X===U);return X}.call(this)}.call(this)}.call(this)}.call(this)};var x=I.zeroHeightmap=function x(l){(function(){var S=l.length;return function R(){var U=R;var T=0;do{U=T<S?(function(){l[T]=0;return R[0]=1+T,R})():void 0}while(T=R[0],U===R);return U}.call(this)}.call(this));return l};var g=I.makeHeightmap=function g(l){return function(){var R=1+Math.pow(2,l);N("Creating "+R+" by "+R+" heightmap...");var S=new Array(R*R);S.resolution=R;S.exponent=l;S.last=R-1;return x(S)}.call(this)};var B=I.randomNoise=function B(l){return function(){var S=l.length;return function R(){var U=R;var T=0;do{U=T<S?(function(){l[T]=A();return R[0]=1+T,R})():void 0}while(T=R[0],U===R);return U}.call(this)}.call(this)};var E=I.mpdInitCorners=function E(l){l[0*l.resolution+0]=A();l[l.last*l.resolution+0]=A();l[0*l.resolution+l.last]=A();return l[l.last*l.resolution+l.last]=A()};var w=I.mpdDisplace=function w(V,S,U,T,l,R){return function(){var af=f(S,U);var X=f(T,l);var Y=V[T*V.resolution+S];var ad=V[T*V.resolution+U];var ab=V[l*V.resolution+S];var W=V[l*V.resolution+U];var ag=n(ab,W);var Z=n(Y,ab);var aa=n(Y,ad);var ae=n(ad,W);var ac=m(ag,Z,aa,ae);V[T*V.resolution+af]=Q(aa,R);V[l*V.resolution+af]=Q(ag,R);V[X*V.resolution+S]=Q(Z,R);V[X*V.resolution+U]=Q(ae,R);return V[X*V.resolution+af]=Q(ac,R)}.call(this)};var j=I.midpointDisplacement=function j(R){E(R);(function l(){var T=l;var S=0;var U=0.3;do{T=S<R.exponent?(function(){(function(){var W=Math.pow(2,S);var V=(R.resolution-1)/W;return function(){var X=W;return function(){var Z=X;return function Y(){var ab=Y;var aa=0;do{ab=aa<Z?(function(){(function(){var ac=X;return function ad(){var af=ad;var ae=0;do{af=ae<ac?(function(){(function(){var ag=V*aa;var ah=ag+V;var ai=V*ae;var aj=ai+V;return w(R,ag,ah,ai,aj,U)}.call(this));return ad[0]=1+ae,ad})():void 0}while(ae=ad[0],af===ad);return af}.call(this)}.call(this));return Y[0]=1+aa,Y})():void 0}while(aa=Y[0],ab===Y);return ab}.call(this)}.call(this)}.call(this)}.call(this));return l[0]=1+S,l[1]=U*0.5,l})():void 0}while(S=l[0],U=l[1],T===l);return T}.call(this));return M(R)};var r=I.midpointDisplacementFinal=function r(R){E(R);(function l(){var T=l;var S=0;var U=0+$("#input-starting-spread").val();do{T=S<R.exponent?(function(){(function(){var W=Math.pow(2,S);var V=(R.resolution-1)/W;return function(){var X=W;return function(){var Z=X;return function Y(){var ab=Y;var aa=0;do{ab=aa<Z?(function(){(function(){var ad=X;return function ac(){var af=ac;var ae=0;do{af=ae<ad?(function(){(function(){var ag=V*aa;var ah=ag+V;var ai=V*ae;var aj=ai+V;return w(R,ag,ah,ai,aj,U)}.call(this));return ac[0]=1+ae,ac})():void 0}while(ae=ac[0],af===ac);return af}.call(this)}.call(this));return Y[0]=1+aa,Y})():void 0}while(aa=Y[0],ab===Y);return ab}.call(this)}.call(this)}.call(this)}.call(this));return l[0]=1+S,l[1]=U*(0+$("#input-spread-reduction").val()),l})():void 0}while(S=l[0],U=l[1],T===l);return T}.call(this));return M(R)};var P=I.mpdDisplaceD2=function P(V,S,U,T,l,R){return function(){var ae=f(S,U);var X=f(T,l);var Y=V[T*V.resolution+S];var ac=V[T*V.resolution+U];var ab=V[l*V.resolution+S];var W=V[l*V.resolution+U];var af=n(ab,W);var Z=n(Y,ab);var aa=n(Y,ac);var ad=n(ac,W);V[T*V.resolution+ae]=Q(aa,R);V[l*V.resolution+ae]=Q(af,R);V[X*V.resolution+S]=Q(Z,R);return V[X*V.resolution+U]=Q(ad,R)}.call(this)};var L=I.midpointDisplacementD1=function L(l){return E(l)};var J=I.midpointDisplacementD2=function J(l){E(l);return P(l,0,l.last,0,l.last,0.1)};var G=I.midpointDisplacementD3=function G(l){E(l);return w(l,0,l.last,0,l.last,0.1)};var F=I.makeDirectionalLight=function F(){return function(){var l=new THREE.DirectionalLight(16777215,1);l.position.set(100,0,150);return l}.call(this)};var t=I.makeCamera=function t(){return function(){var l=new THREE.PerspectiveCamera(55,a/d,0.1,1000);l.position.set(0,-100,150);return l}.call(this)};var y=I.makeRenderer=function y(){return function(){var l=new THREE.WebGLRenderer({antialias:false});l.setClearColor(16777215);l.setSize(a,d);l.setPixelRatio(2);return l}.call(this)};var k=I.makeGeometry=function k(l){return function(){var R=new THREE.PlaneGeometry(v,v,l.resolution-1,l.resolution-1);R.dynamic=true;return R}.call(this)};var p=I.makeControls=function p(l,R){return function(){var S=new THREE.TrackballControls(l,R.domElement);S.rotateSpeed=1.4;S.zoomSpeed=0.5;S.staticMoving=true;S.dynamicDampingFactor=0.3;return S}.call(this)};var C=I.makePlane=function C(l){return function(){var R=new THREE.MeshLambertMaterial({wireframe:o,wireframeLinewidth:s,color:47872});return new THREE.Mesh(l,R)}.call(this)};var D=I.attachToDom=function D(R,S,l){return function(){var W=document.getElementById(S);var V=document.createElement("div");var U=document.createElement("button");var T=document.createTextNode("Refresh");var X=function(Y){return Y.preventDefault()};U.onclick=l;R.domElement.onmousewheel=X;R.domElement.addEventListener("MozMousePixelScroll",X,false);U.appendChild(T);W.appendChild(R.domElement);W.appendChild(V);return V.appendChild(U)}.call(this)};var b=I.updateGeometry=function b(R,l){(function(){var T=R.vertices.length;return function S(){var V=S;var U=0;do{V=U<T?(function(){R.vertices[U].z=z*l[U];return S[0]=1+U,S})():void 0}while(U=S[0],V===S);return V}.call(this)}.call(this));R.verticesNeedUpdate=true;R.computeFaceNormals();R.computeVertexNormals();R.computeMorphNormals();return R};var K=I.makeDemo=function K(S,V,aa){var T=new THREE.Scene();T.add(new THREE.AxisHelper(100));var R=new THREE.Clock();var U=t();var X=y();var Y=k(g(aa));T.add(F());T.add(new THREE.AmbientLight(16777215,0.05));T.add(C(Y));var W=function W(){N("Refreshing ========================================");return function(){var ab=g(aa);N("Generating terrain...");(function(){var ad=new Date().getTime();var ae=(function(){return V(ab)})();var ac=new Date().getTime();N("Elapsed time: "+(ac-ad)+"ms.");return ae}.call(this));N("Refreshing geometry...");(function(){var ad=new Date().getTime();var ae=(function(){return b(Y,ab)})();var ac=new Date().getTime();N("Elapsed time: "+(ac-ad)+"ms.");return ae}.call(this));return N("Done!")}.call(this)};D(X,S,W);var Z=p(U,X);var l=function l(){return function(){var ab=R.getDelta();requestAnimationFrame(l);Z.update(ab);return X.render(T,U)}.call(this)};l();return void 0};var H=I.makeFinal=function H(T){var U=new THREE.Scene();U.add(new THREE.AxisHelper(100));var S=new THREE.Clock();var W=t();var Y=y();var R=g($("#input-exponent").val());var Z=k(R);var V=C(Z);U.add(F());U.add(new THREE.AmbientLight(16777215,0.05));U.add(V);var X=function X(){N("Refreshing ========================================");U.remove(V);R=g($("#input-exponent").val());Z=k(R);V=C(Z);U.add(V);N("Generating terrain...");(function(){var ad=new Date().getTime();var ac=(function(){return r(R)})();var ab=new Date().getTime();N("Elapsed time: "+(ab-ad)+"ms.");return ac}.call(this));N("Refreshing geometry...");(function(){var ac=new Date().getTime();var ad=(function(){return b(Z,R)})();var ab=new Date().getTime();N("Elapsed time: "+(ab-ac)+"ms.");return ad}.call(this));return N("Done!")};D(Y,T,X);var aa=p(W,Y);var l=function l(){return function(){var ab=S.getDelta();requestAnimationFrame(l);aa.update(ab);return Y.render(U,W)}.call(this)};l();return void 0};var u=I.run=function u(){K("demo-random",B,7);K("demo-mpd-1",L,2);K("demo-mpd-2",J,2);K("demo-mpd-3",G,2);K("demo-mpd-4",j,3);return H("demo-final")};$(u)},{}]},{},[1]);